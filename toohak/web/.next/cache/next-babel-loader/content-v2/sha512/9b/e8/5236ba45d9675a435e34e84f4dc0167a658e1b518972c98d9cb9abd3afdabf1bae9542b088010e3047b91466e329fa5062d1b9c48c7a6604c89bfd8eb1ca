{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/ablab/Desktop/toohak/testweb/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ablab/Desktop/toohak/testweb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/ablab/Desktop/toohak/testweb/pages/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport Automerge from 'automerge';\nimport Head from 'next/head';\nimport io from 'socket.io-client';\nimport { useState } from 'react';\nvar docSet = new Automerge.DocSet();\ndocSet.registerHandler(function (docId, doc) {\n  console.log(\"[\".concat(docId, \"] \").concat(JSON.stringify(doc)));\n});\nvar socket = io(\"http://localhost:3000\");\nsocket.on('data', function (_ref) {\n  var data = _ref.data,\n      name = _ref.name;\n  var doc = docSet.getDoc(name);\n  doc = Automerge.change(doc, function (doc) {\n    doc.chards = ['hei'];\n  });\n  docSet.setDoc(name, doc);\n});\nsocket.on('add doc web', function (_ref2) {\n  var title = _ref2.title,\n      change = _ref2.change;\n  var initDoc = Automerge.change(Automerge.init(), function (doc) {\n    doc.title = title, doc.cards = [];\n  });\n  var changes = JSON.parse(change);\n  doc = Automerge.applyChanges(initDoc, changes);\n  docSet.setDoc(title, doc);\n  state.docarray = Array.from(docSet.docs);\n});\nsocket.on('close', function () {\n  console.log(\"[\".concat(HOST, \":\").concat(PORT, \"] connection closed\"));\n});\nsocket.on('error', function (err) {\n  console.log(\"[\".concat(socket.remoteAddress, \":\").concat(socket.remotePort, \"] error: \").concat(err));\n});\nsocket.on('add card web', function (_ref3) {\n  var name = _ref3.name,\n      change = _ref3.change;\n  var doc = docSet.getDoc(name);\n  var changes = JSON.parse(change);\n  doc2 = Automerge.applyChanges(doc, changes);\n  docSet.setDoc(name, doc2);\n});\nvar data = [{\n  \"name\": \"test1\"\n}, {\n  \"name\": \"test2\"\n}];\n\nvar Index = function Index() {\n  _s();\n\n  var _useState = useState(),\n      results = _useState[0],\n      setResults = _useState[1];\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Toohak\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Toohak!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Make a docset and add documents to collaberate with others.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      id: \"messages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"add\",\n      action: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"add_document\",\n        autoComplete: \"off\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"add document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 59\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"delete_doc\",\n      action: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"delete_document\",\n        autoComplete: \"off\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  setResults(data);\n\n                case 1:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        })),\n        children: \"delete document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 60\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"add_card\",\n      action: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"docname\",\n        autoComplete: \"off\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"docinput\",\n        autoComplete: \"off\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 51\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 93\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"delete_doc\",\n        action: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"delete_document\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    setResults(data);\n\n                  case 1:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2);\n          })),\n          children: \"delete document\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 60\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: [\"Results: \", JSON.stringify(results, null, 2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Index, \"Sou+IUQnA5GABuSpt1JuwO+5BUA=\");\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["/home/ablab/Desktop/toohak/testweb/pages/index.js"],"names":["Automerge","Head","io","useState","docSet","DocSet","registerHandler","docId","doc","console","log","JSON","stringify","socket","on","data","name","getDoc","change","chards","setDoc","title","initDoc","init","cards","changes","parse","applyChanges","state","docarray","Array","from","docs","HOST","PORT","err","remoteAddress","remotePort","doc2","Index","results","setResults"],"mappings":"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","sourcesContent":["import Automerge from 'automerge'\nimport Head from 'next/head'\nimport io from 'socket.io-client'\nimport { useState } from 'react'\n\nconst docSet = new Automerge.DocSet()\n\ndocSet.registerHandler((docId, doc) => {\n    console.log(`[${docId}] ${JSON.stringify(doc)}`)\n})\n\n\nconst socket = io(\"http://localhost:3000\")\n\nsocket.on('data', ({data, name}) => {\n    let doc = docSet.getDoc(name)\n    doc = Automerge.change(doc, doc => {\n      doc.chards = ['hei']\n    })\n    docSet.setDoc(name, doc)\n})\n  \nsocket.on('add doc web', ({title, change}) => {\n    const initDoc = Automerge.change(Automerge.init(), doc => {doc.title = title, doc.cards = []})\n    let changes = JSON.parse(change)\n\n    doc = Automerge.applyChanges(initDoc, changes)\n    docSet.setDoc(title, doc)\n    state.docarray = Array.from(docSet.docs)\n})\n\nsocket.on('close', () => {\n    console.log(`[${HOST}:${PORT}] connection closed`)\n})\n\nsocket.on('error', (err) => {\n    console.log(`[${socket.remoteAddress}:${socket.remotePort}] error: ${err}`)\n})\n\nsocket.on('add card web', ({name, change}) => {\n    const doc = docSet.getDoc(name)\n    let changes = JSON.parse(change)\n    doc2 = Automerge.applyChanges(doc, changes)\n    docSet.setDoc(name, doc2)\n})\n\n\nconst data =[{\"name\":\"test1\"},{\"name\":\"test2\"}];\n\n\nconst Index = () => {\n\n    const [results, setResults] = useState()\n\n    return (\n      <>\n        <Head>\n          <title>Toohak</title>\n        </Head>\n        <h1>Toohak!</h1>\n        <p>Make a docset and add documents to collaberate with others.</p>\n        <ul id=\"messages\"></ul>\n        <form id=\"add\" action=\"\">\n            <input id=\"add_document\" autoComplete=\"off\" /><button>add document</button>\n        </form>\n        <form id=\"delete_doc\" action=\"\">\n          <input id=\"delete_document\" autoComplete=\"off\" /><button onClick={async () => {\n            setResults(data)\n          }}>delete document</button>\n        </form>\n        <form id=\"add_card\" action=\"\">\n          <input id=\"docname\" autoComplete=\"off\"/><input id=\"docinput\" autoComplete=\"off\" /><button>Send</button>\n        </form>\n\n        <div>\n        <form id=\"delete_doc\" action=\"\">\n          <input id=\"delete_document\" autoComplete=\"off\" /><button onClick={async () => {\n            setResults(data)\n          }}>delete document</button>\n        </form>\n          <pre>Results: {JSON.stringify(results, null, 2)}</pre>\n        </div>\n      </>\n\n    )\n\n}\n\nexport default Index\n"]},"metadata":{},"sourceType":"module"}